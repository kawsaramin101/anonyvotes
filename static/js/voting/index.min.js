const questionForm=document.querySelector("#question_form"),questionBox=document.querySelector("#question_box"),questionStatus=document.querySelector("#question_status");questionForm.addEventListener("submit",function(e){e.preventDefault();let t=document.querySelector("#question_status");t.innerText="Loading..";let o=document.querySelector("#question_box");axios.post("/add_question/",{question:o.value},{headers:{"X-CSRFToken":csrftoken}}).then(function(e){t.innerText="Question created.",sessionStorage.setItem("questionID",e.data.secondary_id)}).catch(function(e){t.innerText="Some error occurred. Try again later."})});const addMoreOptionBtn=document.querySelector("#add_more_option"),insertAdjacentHTMLBeforeMe=document.querySelector("#insertAdjacentHTMLBeforeMe");sessionStorage.setItem("totalOptions",2),addMoreOptionBtn.addEventListener("click",function(){let e=parseInt(sessionStorage.getItem("totalOptions"))+1;insertAdjacentHTMLBeforeMe.insertAdjacentHTML("beforebegin",`<label for="option${e}">Option${e}:</label><br><input type="text" name="option${e}"/><br/>`),sessionStorage.setItem("totalOptions",e)});const optionForm=document.querySelector("#option_form"),optionStatus=document.querySelector("#option_status");optionForm.addEventListener("submit",function(e){e.preventDefault();let t=sessionStorage.getItem("questionID");if(!t){optionStatus.innerText="Please add a question first.";return}optionStatus.innerText="Loading..";let o=new FormData(e.target),n=Object.fromEntries(o),r=Object.values(n);axios.post("/add_option/",{options:r},{headers:{"X-CSRFToken":csrftoken}}).then(function(e){window.location.href=`/vote/${t}/`,sessionStorage.removeItem("questionID")}).catch(function(e){e.response?optionStatus.innerText=e.response.data.message:optionStatus.innerText="Some error occurred. Try again later."})});